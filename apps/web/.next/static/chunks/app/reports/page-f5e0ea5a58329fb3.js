(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[882],{4613:function(e,t,s){Promise.resolve().then(s.bind(s,9190))},9190:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return f}});var l=s(7437),a=s(2265),r=s(5978),i=s(6410),n=s(1436),o=s(7031),d=s(7059),c=s(2994),x=s(7719),u=s(999),h=s(6810),m=s(9713),p=s(407),g=s(1156),v=s(6940),j=s(5487);function f(){let[e,t]=(0,a.useState)(!1),[s,f]=(0,a.useState)(null),[b,y]=(0,a.useState)([]),[N,w]=(0,a.useState)([]),[S,k]=(0,a.useState)([]),[A,O]=(0,a.useState)(()=>new Date(new Date().getFullYear(),0,1).toISOString().slice(0,10)),[E,R]=(0,a.useState)(()=>new Date(new Date().getFullYear(),11,31).toISOString().slice(0,10)),[C,M]=(0,a.useState)(""),[U,L]=(0,a.useState)("");(0,a.useEffect)(()=>{let e=!0,s=null,l=null,a=null;return(async()=>{try{t(!0),f(null);let n=await (0,i.m6)(),o=(0,i.X9)();s=(0,r.onSnapshot)((0,r.query)((0,r.collection)(o,"cvs"),(0,r.where)("uid","==",n),(0,r.limit)(1e3)),t=>{if(!e)return;let s=[];t.forEach(e=>s.push({id:e.id,...e.data()})),y(s)},e=>f((null==e?void 0:e.message)||"تعذّر تحميل السير الذاتية")),l=(0,r.onSnapshot)((0,r.query)((0,r.collection)(o,"cvs"),(0,r.where)("userId","==",n),(0,r.limit)(1e3)),t=>{if(!e)return;let s=[];t.forEach(e=>s.push({id:e.id,...e.data()})),w(s)},e=>f((null==e?void 0:e.message)||"تعذّر تحميل السير الذاتية")),a=(0,r.onSnapshot)((0,r.query)((0,r.collection)(o,"jobProfiles"),(0,r.where)("uid","==",n),(0,r.limit)(200)),t=>{if(!e)return;let s=[];t.forEach(e=>s.push({id:e.id,...e.data()})),s.sort((e,t)=>String(e.title||e.id).localeCompare(String(t.title||t.id))),k(s)},e=>f((null==e?void 0:e.message)||"تعذّر تحميل ملفات الوظائف"))}catch(e){f((null==e?void 0:e.message)||"تعذّر بدء الاتصال بقاعدة البيانات")}finally{t(!1)}})(),()=>{if(e=!1,s)try{s()}catch(e){}if(l)try{l()}catch(e){}if(a)try{a()}catch(e){}}},[]);let I=(0,a.useMemo)(()=>{let e=new Map;return b.forEach(t=>e.set(String((null==t?void 0:t.id)||""),t)),N.forEach(t=>e.set(String((null==t?void 0:t.id)||""),t)),Array.from(e.values())},[b,N]),T=(0,a.useMemo)(()=>{let e=Date.parse(A+"T00:00:00Z"),t=Date.parse(E+"T23:59:59Z"),s=e=>!C||String((null==e?void 0:e.jobProfileId)||"")===C,l=e=>String(e||"").toLowerCase(),a=e=>{var t;return!U||l((null==e?void 0:e.source)||(null==e?void 0:null===(t=e.ingestion)||void 0===t?void 0:t.source)||(null==e?void 0:e.origin)).includes(U.toLowerCase())},r=e=>{var t,s,l,a;return(null==e?void 0:null===(t=e.submittedAt)||void 0===t?void 0:t.seconds)||(null==e?void 0:null===(s=e.createdAt)||void 0===s?void 0:s.seconds)||(null==e?void 0:null===(l=e.updatedAt)||void 0===l?void 0:l.seconds)||(null==e?void 0:null===(a=e.scoreUpdatedAt)||void 0===a?void 0:a.seconds)||0};return I.filter(l=>{let i=1e3*r(l);return(!e||!t||i>=e&&i<=t)&&s(l)&&a(l)})},[I,A,E,C,U]),D=T.length,_=T.filter(e=>"number"==typeof(null==e?void 0:e.score)),P=_.length?Math.round(_.reduce((e,t)=>e+Number(t.score||0),0)/_.length):0,F=_.length?Math.round(100*_.filter(e=>Number(e.score||0)>=60).length/_.length):0,K=T.filter(e=>String((null==e?void 0:e.status)||"").toLowerCase().includes("strong fit")).length,z=T.filter(e=>String((null==e?void 0:e.status)||"").toLowerCase().includes("not a fit")).length,B=(0,a.useMemo)(()=>{let e=Array(10).fill(0);return _.forEach(t=>{let s=Math.max(0,Math.min(99,Math.floor(Number(t.score||0))));e[Math.floor(s/10)]+=1}),e},[_]),Y=(0,a.useMemo)(()=>{let e={};T.forEach(t=>{var s;(Array.isArray(null==t?void 0:t.skills)?t.skills:Array.isArray(null==t?void 0:null===(s=t.parsed)||void 0===s?void 0:s.skills)?t.parsed.skills:Array.isArray(null==t?void 0:t.rawKeywords)?t.rawKeywords:[]).forEach(t=>{let s=String(t).trim();s&&(e[s]=(e[s]||0)+1)})});let t=Object.entries(e).sort((e,t)=>t[1]-e[1]).slice(0,12),s=Math.max(1,...t.map(e=>{let[,t]=e;return t}));return{items:t,max:s}},[T]),W=(0,a.useMemo)(()=>{let e=e=>{let t=String(e||"other").toLowerCase();return t.includes("upload")||t.includes("csv")?"Upload":t.includes("outlook")?"Outlook":"Other"},t={Upload:0,Outlook:0,Other:0};T.forEach(s=>{var l;t[e((null==s?void 0:s.source)||(null==s?void 0:null===(l=s.ingestion)||void 0===l?void 0:l.source)||(null==s?void 0:s.origin))]+=1});let s=Object.values(t).reduce((e,t)=>e+t,0)||1;return{map:t,pct:e=>Math.round(100*e/s),total:s}},[T]),q=(0,a.useMemo)(()=>{let e=Array(12).fill(0),t=new Date,s=new Date(t.getFullYear(),t.getMonth()-11,1);T.forEach(t=>{var l,a,r,i;let n=(null==t?void 0:null===(l=t.submittedAt)||void 0===l?void 0:l.seconds)||(null==t?void 0:null===(a=t.createdAt)||void 0===a?void 0:a.seconds)||(null==t?void 0:null===(r=t.updatedAt)||void 0===r?void 0:r.seconds)||(null==t?void 0:null===(i=t.scoreUpdatedAt)||void 0===i?void 0:i.seconds)||0;if(!n)return;let o=new Date(1e3*n),d=(o.getFullYear()-s.getFullYear())*12+(o.getMonth()-s.getMonth());d>=0&&d<12&&(e[d]+=1)});let l=Math.max(1,...e);return{points:e,max:l,start:s}},[T]),G=(0,a.useMemo)(()=>{let e={};S.forEach(t=>{e[t.id]=t.title||t.id});let t={};T.forEach(s=>{let l=String((null==s?void 0:s.jobTitle)||e[(null==s?void 0:s.jobProfileId)||""]||(null==s?void 0:s.jobProfileId)||"—"),a=t[l]||{total:0,avg:0,pass:0,accepted:0,rejected:0};a.total+=1;let r="number"==typeof(null==s?void 0:s.score)?Number(s.score||0):null;null!==r&&(a.avg+=r,r>=60&&(a.pass+=1));let i=String((null==s?void 0:s.status)||"").toLowerCase();i.includes("strong fit")&&(a.accepted+=1),i.includes("not a fit")&&(a.rejected+=1),t[l]=a});let s=Object.entries(t).map(e=>{let[t,s]=e;return{role:t,total:s.total,avg:s.total?Math.round(s.avg/s.total):0,passRate:s.total?Math.round(100*s.pass/s.total):0,accepted:s.accepted,rejected:s.rejected}});return s.sort((e,t)=>t.total-e.total),s.slice(0,8)},[T,S]);return(0,l.jsxs)("main",{className:"w-full space-y-6",children:[(0,l.jsx)("section",{className:"rounded-lg border bg-white p-4",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-base font-semibold",children:"Reports & Analytics"}),(0,l.jsx)("p",{className:"text-xs text-gray-600",children:"Overview of candidates, performance, and skill trends."})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("button",{onClick:function(){let e=new Blob([["Job Title,Total Candidates,Average Score,ATS Pass Rate,Accepted,Rejected",...G.map(e=>[e.role,e.total,e.avg,e.passRate+"%",e.accepted,e.rejected].join(","))].join("\n")],{type:"text/csv;charset=utf-8;"}),t=URL.createObjectURL(e),s=document.createElement("a");s.href=t,s.download="reports.csv",s.click(),URL.revokeObjectURL(t)},className:"rounded-md border bg-white px-3 py-2 text-xs hover:bg-gray-50",children:"Export CSV"}),(0,l.jsx)("button",{onClick:function(){try{window.print()}catch(e){}},className:"rounded-md bg-indigo-600 px-3 py-2 text-xs text-white hover:bg-indigo-700",children:"Export PDF"})]})]})}),s&&(0,l.jsx)("section",{className:"rounded-lg border bg-red-50 p-4 text-sm text-red-700",children:s}),(0,l.jsx)("section",{className:"rounded-lg border bg-white p-4",children:(0,l.jsxs)("div",{className:"grid gap-3 md:grid-cols-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-[11px] text-gray-600",children:"Date range"}),(0,l.jsxs)("div",{className:"mt-2 flex items-center gap-2",children:[(0,l.jsx)("input",{type:"date",value:A,onChange:e=>O(e.target.value),className:"w-40 rounded border px-2 py-1 text-xs"}),(0,l.jsx)("input",{type:"date",value:E,onChange:e=>R(e.target.value),className:"w-40 rounded border px-2 py-1 text-xs"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-[11px] text-gray-600",children:"Job"}),(0,l.jsxs)("select",{value:C,onChange:e=>M(e.target.value),className:"mt-2 w-full rounded border px-2 py-1 text-xs",children:[(0,l.jsx)("option",{value:"",children:"All roles"}),S.map(e=>(0,l.jsx)("option",{value:e.id,children:e.title||e.id},e.id))]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-[11px] text-gray-600",children:"Source"}),(0,l.jsxs)("select",{value:U,onChange:e=>L(e.target.value),className:"mt-2 w-full rounded border px-2 py-1 text-xs",children:[(0,l.jsx)("option",{value:"",children:"Upload, Outlook, Other"}),(0,l.jsx)("option",{value:"upload",children:"Upload"}),(0,l.jsx)("option",{value:"outlook",children:"Outlook"}),(0,l.jsx)("option",{value:"other",children:"Other"})]})]}),(0,l.jsxs)("div",{className:"flex items-end justify-end gap-2",children:[(0,l.jsx)("button",{className:"rounded-md bg-indigo-600 px-3 py-2 text-xs text-white hover:bg-indigo-700",children:"Apply"}),(0,l.jsx)("button",{onClick:function(){let e=new Date;M(""),L(""),O(new Date(e.getFullYear(),0,1).toISOString().slice(0,10)),R(new Date(e.getFullYear(),11,31).toISOString().slice(0,10))},className:"rounded-md border bg-white px-3 py-2 text-xs hover:bg-gray-50",children:"Reset"})]})]})}),(0,l.jsxs)("section",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[(0,l.jsxs)("div",{className:"rounded-lg border bg-white p-4",children:[(0,l.jsx)("div",{className:"text-xs text-gray-600",children:"Total Candidates"}),(0,l.jsx)("div",{className:"mt-2 text-2xl font-semibold",children:D}),(0,l.jsx)("div",{className:"mt-1 text-[11px] text-gray-500",children:"Last 12 months"})]}),(0,l.jsxs)("div",{className:"rounded-lg border bg-white p-4",children:[(0,l.jsx)("div",{className:"text-xs text-gray-600",children:"Average Match Score"}),(0,l.jsxs)("div",{className:"mt-2 text-2xl font-semibold",children:[P,"%"]}),(0,l.jsx)("div",{className:"mt-1 text-[11px] text-gray-500",children:"Weighted by role"})]}),(0,l.jsxs)("div",{className:"rounded-lg border bg-white p-4",children:[(0,l.jsx)("div",{className:"text-xs text-gray-600",children:"ATS Pass Rate"}),(0,l.jsxs)("div",{className:"mt-2 text-2xl font-semibold",children:[F,"%"]}),(0,l.jsx)("div",{className:"mt-1 text-[11px] text-gray-500",children:"First screening"})]}),(0,l.jsxs)("div",{className:"rounded-lg border bg-white p-4",children:[(0,l.jsx)("div",{className:"text-xs text-gray-600",children:"Accepted vs Rejected"}),(0,l.jsxs)("div",{className:"mt-2 text-2xl font-semibold",children:[K," / ",z]}),(0,l.jsx)("div",{className:"mt-1 text-[11px] text-gray-500",children:"Offer accepted / Rejected"})]})]}),(0,l.jsxs)("section",{className:"grid gap-4 lg:grid-cols-2",children:[(0,l.jsxs)("div",{className:"rounded-lg border bg-white p-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-xs font-semibold text-gray-700",children:"Score Distribution (Histogram)"}),(0,l.jsx)("div",{className:"text-[11px] text-gray-500",children:"Most candidates cluster between 60–85 ATS score."})]}),(0,l.jsxs)("div",{className:"text-[11px] text-gray-500",children:["Sample size: ",D]})]}),(0,l.jsx)("div",{className:"mt-4 h-40 w-full",children:(0,l.jsx)(n.h,{children:(0,l.jsxs)(o.v,{data:B.map((e,t)=>({bucket:"".concat(10*t),count:e})),margin:{top:10,right:10,left:0,bottom:0},children:[(0,l.jsx)("defs",{children:(0,l.jsxs)("linearGradient",{id:"gradIndigoPurple",x1:"0",y1:"1",x2:"0",y2:"0",children:[(0,l.jsx)("stop",{offset:"0%",stopColor:"#6366f1"}),(0,l.jsx)("stop",{offset:"100%",stopColor:"#a78bfa"})]})}),(0,l.jsx)(d.K,{dataKey:"bucket",tick:{fontSize:11},tickLine:!1,axisLine:{stroke:"#e5e7eb"}}),(0,l.jsx)(c.B,{tick:{fontSize:11},tickLine:!1,axisLine:{stroke:"#e5e7eb"},allowDecimals:!1}),(0,l.jsx)(x.u,{cursor:{fill:"#f9fafb"},contentStyle:{fontSize:11}}),(0,l.jsx)(u.$,{dataKey:"count",fill:"url(#gradIndigoPurple)",radius:[4,4,0,0]})]})})})]}),(0,l.jsxs)("div",{className:"rounded-lg border bg-white p-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("div",{className:"text-xs font-semibold text-gray-700",children:"Top Skills (Extracted)"}),(0,l.jsxs)("div",{className:"text-[11px] text-gray-500",children:["Top ",Math.min(12,Y.items.length)," skills"]})]}),(0,l.jsx)("div",{className:"mt-4 h-48 w-full",children:Y.items.length>0?(0,l.jsx)(n.h,{children:(0,l.jsxs)(o.v,{layout:"vertical",data:Y.items.map(e=>{let[t,s]=e;return{skill:t,count:s}}),margin:{top:5,right:10,left:0,bottom:5},children:[(0,l.jsx)("defs",{children:(0,l.jsxs)("linearGradient",{id:"gradIndigoPurple2",x1:"0",y1:"0",x2:"1",y2:"0",children:[(0,l.jsx)("stop",{offset:"0%",stopColor:"#6366f1"}),(0,l.jsx)("stop",{offset:"100%",stopColor:"#a78bfa"})]})}),(0,l.jsx)(d.K,{type:"number",hide:!0}),(0,l.jsx)(c.B,{type:"category",dataKey:"skill",tick:{fontSize:11},width:120}),(0,l.jsx)(x.u,{cursor:{fill:"#f9fafb"},contentStyle:{fontSize:11}}),(0,l.jsx)(u.$,{dataKey:"count",fill:"url(#gradIndigoPurple2)",radius:[0,4,4,0]})]})}):(0,l.jsx)("div",{className:"text-[11px] text-gray-500",children:"No skill data available."})})]})]}),(0,l.jsxs)("section",{className:"grid gap-4 lg:grid-cols-2",children:[(0,l.jsxs)("div",{className:"rounded-lg border bg-white p-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("div",{className:"text-xs font-semibold text-gray-700",children:"Candidate Source Breakdown"}),(0,l.jsx)("div",{className:"text-[11px] text-gray-500",children:"Upload vs Outlook vs Other"})]}),(0,l.jsxs)("div",{className:"mt-4 flex items-center gap-6",children:[(0,l.jsx)("div",{className:"h-40 w-40",children:(0,l.jsx)(n.h,{children:(0,l.jsx)(h.u,{children:(0,l.jsx)(m.b,{data:[{name:"Upload",value:W.map.Upload},{name:"Outlook",value:W.map.Outlook},{name:"Other",value:W.map.Other}],dataKey:"value",nameKey:"name",innerRadius:50,outerRadius:80,children:["#6366f1","#22c55e","#a78bfa"].map((e,t)=>(0,l.jsx)(p.b,{fill:e},t))})})})}),(0,l.jsxs)("div",{className:"space-y-2 text-[11px]",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{className:"inline-block h-2 w-2 rounded bg-indigo-600"})," Upload ",(0,l.jsxs)("span",{className:"text-gray-600",children:[W.pct(W.map.Upload),"%"]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{className:"inline-block h-2 w-2 rounded bg-green-500"})," Outlook ",(0,l.jsxs)("span",{className:"text-gray-600",children:[W.pct(W.map.Outlook),"%"]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{className:"inline-block h-2 w-2 rounded bg-purple-400"})," Other ",(0,l.jsxs)("span",{className:"text-gray-600",children:[W.pct(W.map.Other),"%"]})]}),(0,l.jsx)("div",{className:"pt-2 text-[10px] text-gray-500",children:"Uploaded vs Outlook vs Other"})]})]})]}),(0,l.jsxs)("div",{className:"rounded-lg border bg-white p-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("div",{className:"text-xs font-semibold text-gray-700",children:"Monthly Candidate Volume"}),(0,l.jsx)("div",{className:"text-[11px] text-gray-500",children:"Last 12 months"})]}),(0,l.jsxs)("div",{className:"mt-4 h-40 w-full",children:[(0,l.jsx)(n.h,{children:(0,l.jsxs)(g.w,{data:q.points.map((e,t)=>({m:t+1,count:e})),margin:{top:5,right:20,left:0,bottom:5},children:[(0,l.jsx)(v.q,{stroke:"#f1f5f9",vertical:!1}),(0,l.jsx)(d.K,{dataKey:"m",tick:{fontSize:11},tickLine:!1,axisLine:{stroke:"#e5e7eb"}}),(0,l.jsx)(c.B,{tick:{fontSize:11},tickLine:!1,axisLine:{stroke:"#e5e7eb"},allowDecimals:!1}),(0,l.jsx)(x.u,{contentStyle:{fontSize:11},cursor:{stroke:"#e5e7eb"}}),(0,l.jsx)(j.x,{type:"monotone",dataKey:"count",stroke:"#6366f1",strokeWidth:2,dot:{r:3}})]})}),(0,l.jsx)("div",{className:"mt-2 text-[10px] text-gray-500",children:"Units: candidates/month"}),(0,l.jsx)("div",{className:"text-[10px] text-gray-500",children:"Peak in Q4 driven by graduate intake"})]})]})]}),(0,l.jsxs)("section",{className:"rounded-lg border bg-white",children:[(0,l.jsx)("div",{className:"flex items-center justify-between px-4 py-3",children:(0,l.jsx)("div",{className:"text-sm font-semibold text-gray-900",children:"By Job Title"})}),(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:"w-full text-left text-sm",children:[(0,l.jsx)("thead",{className:"border-t border-b bg-gray-50 text-xs text-gray-600",children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"px-4 py-2",children:"Job Title"}),(0,l.jsx)("th",{className:"px-4 py-2",children:"Total Candidates"}),(0,l.jsx)("th",{className:"px-4 py-2",children:"Average Score"}),(0,l.jsx)("th",{className:"px-4 py-2",children:"ATS Pass Rate"}),(0,l.jsx)("th",{className:"px-4 py-2",children:"Accepted"}),(0,l.jsx)("th",{className:"px-4 py-2",children:"Rejected"})]})}),(0,l.jsxs)("tbody",{children:[G.map(e=>(0,l.jsxs)("tr",{className:"border-b",children:[(0,l.jsx)("td",{className:"px-4 py-3 text-xs text-gray-700",children:e.role}),(0,l.jsx)("td",{className:"px-4 py-3 text-xs text-gray-700",children:e.total}),(0,l.jsxs)("td",{className:"px-4 py-3 text-xs text-gray-700",children:[e.avg,"%"]}),(0,l.jsxs)("td",{className:"px-4 py-3 text-xs text-gray-700",children:[e.passRate,"%"]}),(0,l.jsx)("td",{className:"px-4 py-3 text-xs text-gray-700",children:e.accepted}),(0,l.jsx)("td",{className:"px-4 py-3 text-xs text-gray-700",children:e.rejected})]},e.role)),!e&&0===G.length&&(0,l.jsx)("tr",{children:(0,l.jsx)("td",{className:"px-4 py-6 text-center text-xs text-gray-500",colSpan:6,children:"No data for selected filters."})})]})]})})]})]})}},6410:function(e,t,s){"use strict";s.d(t,{X9:function(){return x},bH:function(){return u},kL:function(){return c},m6:function(){return m},mi:function(){return h}});var l=s(738),a=s(3301),r=s(5978),i=s(62),n=s(257);let o={apiKey:"AIzaSyATtmjTHjfMEesV1HQU_x1M3W_g_IWYC-g",authDomain:"cvchk-1a7e0.firebaseapp.com",projectId:"cvchk-1a7e0",storageBucket:"cvchk-1a7e0.firebasestorage.app",messagingSenderId:"318794750",appId:"1:318794750:web:ead1f9207f928eb2696eaf",measurementId:"G-VEX3P44B83"},d=null;function c(){return d||(d=(0,l.getApps)().length?(0,l.getApps)()[0]:(0,l.initializeApp)(o)),(0,a.v0)(d)}function x(){d||(d=(0,l.getApps)().length?(0,l.getApps)()[0]:(0,l.initializeApp)(o));let e=(0,r.getFirestore)(d);try{let t="localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname,s="1"===String("0"),l=Number(n.env.FIREBASE_EMULATORS_FIRESTORE_PORT||0)||8090;t&&s&&(0,r.connectFirestoreEmulator)(e,"127.0.0.1",l)}catch(e){}return e}function u(){d||(d=(0,l.getApps)().length?(0,l.getApps)()[0]:(0,l.initializeApp)(o));let e=(0,i.getStorage)(d);try{let t="localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname,s="1"===String("0"),l=Number(n.env.FIREBASE_EMULATORS_STORAGE_PORT||0)||9199;t&&s&&(0,i.connectStorageEmulator)(e,"127.0.0.1",l)}catch(e){}return e}async function h(e){let t=u();try{let s=(0,i.ref)(t,e);return await (0,i.getDownloadURL)(s)}catch(t){try{let t=String("cvchk-1a7e0.firebasestorage.app"),s="1"===String("0")?"http://127.0.0.1:"+(n.env.FIREBASE_EMULATORS_STORAGE_PORT||9199):"https://firebasestorage.googleapis.com",l=t.endsWith(".appspot.com")||t.endsWith(".firebasestorage.app")?t:"".concat(t),a=encodeURIComponent(e);return"".concat(s,"/v0/b/").concat(l,"/o/").concat(a,"?alt=media")}catch(e){throw t}}}async function m(){try{var e,t;let s=c(),l=s.currentUser;if(null==l?void 0:l.uid)return l.uid;if(await new Promise(e=>(0,a.Aj)(s,e)),null===(e=s.currentUser)||void 0===e?void 0:e.uid)return s.currentUser.uid;if(await (0,a.XB)(s),await new Promise(e=>(0,a.Aj)(s,e)),!(null===(t=s.currentUser)||void 0===t?void 0:t.uid))throw Error("Unable to establish user session");return s.currentUser.uid}catch(l){let e=String((null==l?void 0:l.code)||"").toLowerCase(),t=String((null==l?void 0:l.message)||"").toLowerCase();"localhost"===window.location.hostname||window.location.hostname;let s="1"===(n.env.NEXT_PUBLIC_FORCE_DEV_UID||"");if(t.includes("invalid-api-key")||e.includes("admin-restricted-operation")||e.includes("operation-not-allowed")||e.includes("network-request-failed")||e.includes("config")||s)try{let e="dev:uid",t=window.localStorage.getItem(e);return t||(t="dev-".concat(Math.random().toString(36).slice(2)),window.localStorage.setItem(e,t)),t}catch(e){return"dev-".concat(Date.now())}throw l}}}},function(e){e.O(0,[358,139,2,682,971,117,744],function(){return e(e.s=4613)}),_N_E=e.O()}]);