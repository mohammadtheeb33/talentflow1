(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[676],{2296:function(e,t,s){Promise.resolve().then(s.bind(s,1056))},1056:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return a}});var l=s(7437),r=s(2265);function a(){let[e,t]=(0,r.useState)([]),[s,a]=(0,r.useState)([]),[n,c]=(0,r.useState)(null),i=(0,r.useCallback)(async e=>{var s,l;c(null);try{let l=(await e.text()).replace(/\r\n/g,"\n").replace(/\r/g,"\n").split(/\n+/).filter(Boolean);if(0===l.length){c("الملف فارغ أو غير صالح");return}let r=l[0],n=e=>{let t=[],s="",l=!1;for(let r=0;r<e.length;r++){let a=e[r];'"'===a?l&&'"'===e[r+1]?(s+='"',r++):l=!l:","!==a||l?s+=a:(t.push(s.trim()),s="")}return t.push(s.trim()),t},i=n(r);a(i);let d=[];for(let e=1;e<l.length;e++){let t=n(l[e]),r={};for(let e=0;e<i.length;e++)r[i[e]]=null!==(s=t[e])&&void 0!==s?s:"";d.push(r)}t(d)}catch(e){c(null!==(l=null==e?void 0:e.message)&&void 0!==l?l:"تعذّر قراءة الملف")}},[]),d=(0,r.useCallback)(e=>{e&&i(e)},[i]),x=(0,r.useMemo)(()=>s.slice(0,8),[s]);return(0,l.jsxs)("main",{className:"space-y-6",children:[(0,l.jsxs)("section",{className:"rounded-lg border bg-white p-4",children:[(0,l.jsx)("h2",{className:"text-sm font-semibold text-gray-900",children:"Upload Candidates CSV"}),(0,l.jsx)("p",{className:"mt-1 text-xs text-gray-600",children:"اختر ملف CSV وسيتم عرض معاينة للصفوف."}),(0,l.jsxs)("div",{className:"mt-4 flex items-center gap-3",children:[(0,l.jsxs)("label",{className:"inline-flex cursor-pointer items-center gap-2 rounded-md border bg-white px-3 py-2 text-xs hover:bg-gray-50",children:[(0,l.jsx)("span",{children:"Choose File"}),(0,l.jsx)("input",{type:"file",accept:".csv,text/csv",className:"hidden",onChange:e=>{var t;return d(null===(t=e.target.files)||void 0===t?void 0:t[0])}})]}),(0,l.jsx)("button",{onClick:()=>t([]),className:"rounded-md border bg-white px-3 py-2 text-xs hover:bg-gray-50",children:"Clear"})]}),n&&(0,l.jsx)("div",{className:"mt-3 rounded-md border border-red-200 bg-red-50 p-3 text-xs text-red-700",children:n})]}),(0,l.jsxs)("section",{className:"rounded-lg border bg-white",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between px-4 py-3",children:[(0,l.jsx)("h3",{className:"text-sm font-semibold text-gray-900",children:"Preview"}),(0,l.jsxs)("div",{className:"text-xs text-gray-500",children:[e.length," rows"]})]}),(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:"w-full text-left text-sm",children:[(0,l.jsx)("thead",{className:"border-t border-b bg-gray-50 text-xs text-gray-600",children:(0,l.jsx)("tr",{children:x.map(e=>(0,l.jsx)("th",{className:"px-4 py-2",children:e},e))})}),(0,l.jsxs)("tbody",{children:[e.slice(0,50).map((e,t)=>(0,l.jsx)("tr",{className:"border-b",children:x.map(t=>(0,l.jsx)("td",{className:"px-4 py-3 text-gray-700",children:e[t]},t))},t)),0===e.length&&(0,l.jsx)("tr",{children:(0,l.jsx)("td",{className:"px-4 py-6 text-xs text-gray-500",colSpan:x.length||1,children:"لا توجد بيانات بعد. قم برفع ملف CSV."})})]})]})})]})]})}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=2296)}),_N_E=e.O()}]);