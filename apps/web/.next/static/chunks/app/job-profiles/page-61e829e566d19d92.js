(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[706],{8369:function(e,t,s){Promise.resolve().then(s.bind(s,202))},202:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return c}});var i=s(7437),r=s(2265),n=s(7648),a=s(5978),l=s(6410);function o(){let[e,t]=(0,r.useState)([]),[s,o]=(0,r.useState)(!1),[c,d]=(0,r.useState)(null),[u,m]=(0,r.useState)("");(0,r.useEffect)(()=>{let e=!0;return(async()=>{try{var s;o(!0),d(null);let i=(0,l.kL)(),r=null===(s=i.currentUser)||void 0===s?void 0:s.uid;if(!r)try{r=await (0,l.m6)()}catch(e){}if(!r){d("Unauthorized: Please sign in");return}let n=(0,l.X9)(),c=await (0,a.getDocs)((0,a.query)((0,a.collection)(n,"jobProfiles"),(0,a.where)("uid","==",r),(0,a.limit)(100))),u=[];if(c.forEach(e=>u.push({id:e.id,...e.data()})),u.sort((e,t)=>String(e.title||e.id).localeCompare(String(t.title||t.id))),!e)return;t(u)}catch(e){d((null==e?void 0:e.message)||"Failed to load job profiles")}finally{o(!1)}})(),()=>{e=!1}},[]);let h=async e=>{if(confirm("Are you sure you want to delete this job profile?"))try{let s=(0,l.X9)();await (0,a.deleteDoc)((0,a.doc)(s,"jobProfiles",e)),t(t=>t.filter(t=>t.id!==e))}catch(e){alert("Failed to delete: "+e.message)}},x=e.filter(e=>{let t=u.toLowerCase();return(e.title||"").toLowerCase().includes(t)||(e.description||"").toLowerCase().includes(t)});return(0,i.jsxs)("section",{className:"rounded-xl border border-gray-200 bg-white shadow-sm",children:[(0,i.jsxs)("div",{className:"flex flex-col gap-4 border-b border-gray-100 p-6 sm:flex-row sm:items-center sm:justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Job Profiles"}),(0,i.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Manage job requirements, skills, and scoring weights."})]}),(0,i.jsxs)(n.default,{href:"/job-profiles/new",className:"inline-flex items-center gap-2 rounded-lg bg-indigo-600 px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:[(0,i.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create Job Profile"]})]}),(0,i.jsx)("div",{className:"border-b border-gray-100 bg-gray-50/50 px-6 py-4",children:(0,i.jsxs)("div",{className:"relative w-full max-w-md",children:[(0,i.jsx)("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",children:(0,i.jsx)("svg",{className:"h-4 w-4 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,i.jsx)("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})})}),(0,i.jsx)("input",{value:u,onChange:e=>m(e.target.value),placeholder:"Search profiles...",className:"w-full rounded-lg border border-gray-300 bg-white py-2 pl-10 pr-4 text-sm shadow-sm transition-colors focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500"})]})}),c&&(0,i.jsx)("div",{className:"m-6 rounded-md bg-red-50 p-4 text-sm text-red-700",children:c}),(0,i.jsx)("div",{className:"overflow-x-auto",children:(0,i.jsxs)("table",{className:"w-full text-left text-sm",children:[(0,i.jsx)("thead",{className:"bg-gray-50 text-xs uppercase tracking-wider text-gray-500",children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{className:"px-6 py-3 font-semibold",children:"Job Title"}),(0,i.jsx)("th",{className:"px-6 py-3 font-semibold",children:"Experience"}),(0,i.jsx)("th",{className:"px-6 py-3 font-semibold",children:"Education"}),(0,i.jsx)("th",{className:"px-6 py-3 font-semibold",children:"Required Skills"}),(0,i.jsx)("th",{className:"px-6 py-3 font-semibold text-right",children:"Actions"})]})}),(0,i.jsxs)("tbody",{className:"divide-y divide-gray-100 bg-white",children:[s&&Array.from({length:3}).map((e,t)=>(0,i.jsxs)("tr",{className:"animate-pulse",children:[(0,i.jsx)("td",{className:"px-6 py-4",children:(0,i.jsx)("div",{className:"h-4 w-32 rounded bg-gray-200"})}),(0,i.jsx)("td",{className:"px-6 py-4",children:(0,i.jsx)("div",{className:"h-4 w-16 rounded bg-gray-200"})}),(0,i.jsx)("td",{className:"px-6 py-4",children:(0,i.jsx)("div",{className:"h-4 w-24 rounded bg-gray-200"})}),(0,i.jsx)("td",{className:"px-6 py-4",children:(0,i.jsx)("div",{className:"h-4 w-48 rounded bg-gray-200"})}),(0,i.jsx)("td",{className:"px-6 py-4",children:(0,i.jsx)("div",{className:"h-8 w-8 ml-auto rounded bg-gray-200"})})]},t)),!s&&x.map(e=>{var t,s;return(0,i.jsxs)("tr",{className:"group hover:bg-gray-50",children:[(0,i.jsxs)("td",{className:"px-6 py-4",children:[(0,i.jsx)("div",{className:"font-medium text-gray-900",children:e.title||"Untitled Profile"}),e.description&&(0,i.jsx)("div",{className:"mt-1 line-clamp-1 text-xs text-gray-500",children:e.description})]}),(0,i.jsx)("td",{className:"px-6 py-4 text-gray-600",children:e.minYearsExp?"".concat(e.minYearsExp," years"):"No minimum"}),(0,i.jsx)("td",{className:"px-6 py-4 text-gray-600 capitalize",children:(null===(t=e.educationLevel)||void 0===t?void 0:t.replace("_"," "))||"None"}),(0,i.jsx)("td",{className:"px-6 py-4",children:(0,i.jsxs)("div",{className:"flex flex-wrap gap-1",children:[(e.requiredSkills||[]).slice(0,3).map((e,t)=>(0,i.jsx)("span",{className:"inline-flex items-center rounded-full bg-indigo-50 px-2 py-0.5 text-xs font-medium text-indigo-700",children:e},t)),(e.requiredSkills||[]).length>3&&(0,i.jsxs)("span",{className:"inline-flex items-center rounded-full bg-gray-100 px-2 py-0.5 text-xs font-medium text-gray-600",children:["+",((null===(s=e.requiredSkills)||void 0===s?void 0:s.length)||0)-3]}),0===(e.requiredSkills||[]).length&&(0,i.jsx)("span",{className:"text-gray-400 italic",children:"No skills specified"})]})}),(0,i.jsx)("td",{className:"px-6 py-4 text-right",children:(0,i.jsxs)("div",{className:"flex items-center justify-end gap-2 opacity-0 transition-opacity group-hover:opacity-100",children:[(0,i.jsx)(n.default,{href:"/job-profiles/new?prefill=".concat(encodeURIComponent(e.title||e.id)),className:"text-gray-400 hover:text-indigo-600",title:"Duplicate",children:(0,i.jsx)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),(0,i.jsx)("button",{onClick:()=>h(e.id),className:"text-gray-400 hover:text-red-600",title:"Delete",children:(0,i.jsx)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},e.id)}),!s&&0===x.length&&(0,i.jsx)("tr",{children:(0,i.jsxs)("td",{className:"px-6 py-12 text-center",colSpan:5,children:[(0,i.jsx)("div",{className:"mx-auto flex h-12 w-12 items-center justify-center rounded-full bg-gray-100",children:(0,i.jsx)("svg",{className:"h-6 w-6 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),(0,i.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No job profiles found"}),(0,i.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Create a profile to start scoring candidates."}),(0,i.jsx)("div",{className:"mt-4",children:(0,i.jsx)(n.default,{href:"/job-profiles/new",className:"inline-flex items-center gap-2 rounded-lg bg-indigo-600 px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-indigo-700",children:"Create Job Profile"})})]})})]})]})})]})}function c(){return(0,i.jsx)("main",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-8",children:(0,i.jsx)(o,{})})}},6410:function(e,t,s){"use strict";s.d(t,{X9:function(){return u},bH:function(){return m},kL:function(){return d},m6:function(){return x},mi:function(){return h}});var i=s(738),r=s(3301),n=s(5978),a=s(62),l=s(257);let o={apiKey:"AIzaSyATtmjTHjfMEesV1HQU_x1M3W_g_IWYC-g",authDomain:"cvchk-1a7e0.firebaseapp.com",projectId:"cvchk-1a7e0",storageBucket:"cvchk-1a7e0.firebasestorage.app",messagingSenderId:"318794750",appId:"1:318794750:web:ead1f9207f928eb2696eaf",measurementId:"G-VEX3P44B83"},c=null;function d(){return c||(c=(0,i.getApps)().length?(0,i.getApps)()[0]:(0,i.initializeApp)(o)),(0,r.v0)(c)}function u(){c||(c=(0,i.getApps)().length?(0,i.getApps)()[0]:(0,i.initializeApp)(o));let e=(0,n.getFirestore)(c);try{let t="localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname,s="1"===String("0"),i=Number(l.env.FIREBASE_EMULATORS_FIRESTORE_PORT||0)||8090;t&&s&&(0,n.connectFirestoreEmulator)(e,"127.0.0.1",i)}catch(e){}return e}function m(){c||(c=(0,i.getApps)().length?(0,i.getApps)()[0]:(0,i.initializeApp)(o));let e=(0,a.getStorage)(c);try{let t="localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname,s="1"===String("0"),i=Number(l.env.FIREBASE_EMULATORS_STORAGE_PORT||0)||9199;t&&s&&(0,a.connectStorageEmulator)(e,"127.0.0.1",i)}catch(e){}return e}async function h(e){let t=m();try{let s=(0,a.ref)(t,e);return await (0,a.getDownloadURL)(s)}catch(t){try{let t=String("cvchk-1a7e0.firebasestorage.app"),s="1"===String("0")?"http://127.0.0.1:"+(l.env.FIREBASE_EMULATORS_STORAGE_PORT||9199):"https://firebasestorage.googleapis.com",i=t.endsWith(".appspot.com")||t.endsWith(".firebasestorage.app")?t:"".concat(t),r=encodeURIComponent(e);return"".concat(s,"/v0/b/").concat(i,"/o/").concat(r,"?alt=media")}catch(e){throw t}}}async function x(){try{var e,t;let s=d(),i=s.currentUser;if(null==i?void 0:i.uid)return i.uid;if(await new Promise(e=>(0,r.Aj)(s,e)),null===(e=s.currentUser)||void 0===e?void 0:e.uid)return s.currentUser.uid;if(await (0,r.XB)(s),await new Promise(e=>(0,r.Aj)(s,e)),!(null===(t=s.currentUser)||void 0===t?void 0:t.uid))throw Error("Unable to establish user session");return s.currentUser.uid}catch(i){let e=String((null==i?void 0:i.code)||"").toLowerCase(),t=String((null==i?void 0:i.message)||"").toLowerCase();"localhost"===window.location.hostname||window.location.hostname;let s="1"===(l.env.NEXT_PUBLIC_FORCE_DEV_UID||"");if(t.includes("invalid-api-key")||e.includes("admin-restricted-operation")||e.includes("operation-not-allowed")||e.includes("network-request-failed")||e.includes("config")||s)try{let e="dev:uid",t=window.localStorage.getItem(e);return t||(t="dev-".concat(Math.random().toString(36).slice(2)),window.localStorage.setItem(e,t)),t}catch(e){return"dev-".concat(Date.now())}throw i}}}},function(e){e.O(0,[358,139,2,648,971,117,744],function(){return e(e.s=8369)}),_N_E=e.O()}]);