(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[360],{6074:function(e,t,r){Promise.resolve().then(r.bind(r,9929))},9929:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return d}});var s=r(7437),a=r(2265),o=r(9376),n=r(7648),i=r(5978),l=r(6410);function c(e){return e.split(/[\,\n]/).map(e=>e.trim()).filter(e=>e.length>0)}function d(){let e=(0,o.useRouter)(),t=(0,o.useSearchParams)().get("prefill")||"",[r,d]=(0,a.useState)(t),[u,m]=(0,a.useState)(""),[g,h]=(0,a.useState)(""),[p,x]=(0,a.useState)(""),[f,b]=(0,a.useState)(2),[v,y]=(0,a.useState)("bachelor"),[j,w]=(0,a.useState)({roleFit:.3,skillsQuality:.3,experienceQuality:.2,projectsImpact:.1,languageClarity:.05,atsFormat:.05}),[N,S]=(0,a.useState)(!1),[k,E]=(0,a.useState)(null),A=(0,a.useMemo)(()=>c(g),[g]),P=(0,a.useMemo)(()=>c(p),[p]);async function R(t){t.preventDefault();try{var s;S(!0),E(null);let t=(0,l.kL)(),a=null===(s=t.currentUser)||void 0===s?void 0:s.uid;if(!a){E("Unauthorized: Please sign in");return}let o=(0,l.X9)(),n={title:r,description:u,requiredSkills:A,optionalSkills:P,minYearsExp:f,educationLevel:v,weights:j,createdAt:(0,i.serverTimestamp)(),uid:a};await (0,i.addDoc)((0,i.collection)(o,"jobProfiles"),n),e.push("/job-profiles")}catch(e){E((null==e?void 0:e.message)||"Failed to create job profile")}finally{S(!1)}}let _=Object.values(j).reduce((e,t)=>e+t,0);return(0,s.jsxs)("main",{className:"mx-auto max-w-3xl px-4 sm:px-6 lg:px-8 py-8",children:[(0,s.jsxs)("div",{className:"mb-6 flex items-center gap-2 text-sm text-gray-500",children:[(0,s.jsx)(n.default,{href:"/job-profiles",className:"hover:text-indigo-600",children:"Job Profiles"}),(0,s.jsx)("span",{children:"/"}),(0,s.jsx)("span",{className:"font-medium text-gray-900",children:"New Profile"})]}),(0,s.jsxs)("div",{className:"rounded-xl border border-gray-200 bg-white p-6 shadow-sm",children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:"Create Job Profile"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Define the skills, requirements, and scoring weights for this role."})]}),k&&(0,s.jsx)("div",{className:"mb-6 rounded-md bg-red-50 p-4 text-sm text-red-700",children:k}),(0,s.jsxs)("form",{onSubmit:R,className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid gap-6 sm:grid-cols-2",children:[(0,s.jsxs)("div",{className:"col-span-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Job Title"}),(0,s.jsx)("input",{required:!0,value:r,onChange:e=>d(e.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2 border",placeholder:"e.g. Senior Software Engineer"})]}),(0,s.jsxs)("div",{className:"col-span-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),(0,s.jsx)("textarea",{value:u,onChange:e=>m(e.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2 border",rows:3,placeholder:"Brief description of the role..."})]}),(0,s.jsxs)("div",{className:"col-span-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Required Skills"}),(0,s.jsx)("textarea",{value:g,onChange:e=>h(e.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2 border",rows:3,placeholder:"e.g. React, TypeScript, Node.js (one per line or comma separated)"}),(0,s.jsxs)("p",{className:"mt-1 text-xs text-gray-500",children:[A.length," skills detected"]})]}),(0,s.jsxs)("div",{className:"col-span-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Optional Skills (Nice to have)"}),(0,s.jsx)("textarea",{value:p,onChange:e=>x(e.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2 border",rows:2,placeholder:"e.g. Docker, AWS"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Minimum Experience (Years)"}),(0,s.jsx)("input",{type:"number",min:0,value:f,onChange:e=>b(Number(e.target.value)),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2 border"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Education Level"}),(0,s.jsxs)("select",{value:v,onChange:e=>y(e.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2 border",children:[(0,s.jsx)("option",{value:"none",children:"None / Any"}),(0,s.jsx)("option",{value:"high_school",children:"High School"}),(0,s.jsx)("option",{value:"associate",children:"Associate Degree"}),(0,s.jsx)("option",{value:"bachelor",children:"Bachelor's Degree"}),(0,s.jsx)("option",{value:"master",children:"Master's Degree"}),(0,s.jsx)("option",{value:"phd",children:"PhD"})]})]})]}),(0,s.jsxs)("div",{className:"border-t border-gray-100 pt-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-gray-900",children:"Scoring Weights"}),(0,s.jsxs)("span",{className:"text-xs font-medium px-2 py-1 rounded-full ".concat(.01>Math.abs(_-1)?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"),children:["Total: ",_.toFixed(2)," (Should be 1.00)"]})]}),(0,s.jsx)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[{key:"roleFit",label:"Role Fit"},{key:"skillsQuality",label:"Skills Quality"},{key:"experienceQuality",label:"Experience Quality"},{key:"projectsImpact",label:"Projects Impact"},{key:"languageClarity",label:"Language Clarity"},{key:"atsFormat",label:"ATS Format"}].map(e=>{let{key:t,label:r}=e;return(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:r}),(0,s.jsx)("input",{type:"number",step:"0.05",min:"0",max:"1",value:j[t],onChange:e=>w(r=>({...r,[t]:Number(e.target.value)})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2 border"})]},t)})})]}),(0,s.jsxs)("div",{className:"flex items-center justify-end gap-3 border-t border-gray-100 pt-6",children:[(0,s.jsx)(n.default,{href:"/job-profiles",className:"rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50",children:"Cancel"}),(0,s.jsx)("button",{type:"submit",disabled:N,className:"rounded-md bg-indigo-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:opacity-60",children:N?"Creating...":"Create Profile"})]})]})]})]})}},9376:function(e,t,r){"use strict";var s=r(5475);r.o(s,"useParams")&&r.d(t,{useParams:function(){return s.useParams}}),r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},6410:function(e,t,r){"use strict";r.d(t,{X9:function(){return u},bH:function(){return m},kL:function(){return d},m6:function(){return h},mi:function(){return g}});var s=r(738),a=r(3301),o=r(5978),n=r(62),i=r(257);let l={apiKey:"AIzaSyATtmjTHjfMEesV1HQU_x1M3W_g_IWYC-g",authDomain:"cvchk-1a7e0.firebaseapp.com",projectId:"cvchk-1a7e0",storageBucket:"cvchk-1a7e0.firebasestorage.app",messagingSenderId:"318794750",appId:"1:318794750:web:ead1f9207f928eb2696eaf",measurementId:"G-VEX3P44B83"},c=null;function d(){return c||(c=(0,s.getApps)().length?(0,s.getApps)()[0]:(0,s.initializeApp)(l)),(0,a.v0)(c)}function u(){c||(c=(0,s.getApps)().length?(0,s.getApps)()[0]:(0,s.initializeApp)(l));let e=(0,o.getFirestore)(c);try{let t="localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname,r="1"===String("0"),s=Number(i.env.FIREBASE_EMULATORS_FIRESTORE_PORT||0)||8090;t&&r&&(0,o.connectFirestoreEmulator)(e,"127.0.0.1",s)}catch(e){}return e}function m(){c||(c=(0,s.getApps)().length?(0,s.getApps)()[0]:(0,s.initializeApp)(l));let e=(0,n.getStorage)(c);try{let t="localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname,r="1"===String("0"),s=Number(i.env.FIREBASE_EMULATORS_STORAGE_PORT||0)||9199;t&&r&&(0,n.connectStorageEmulator)(e,"127.0.0.1",s)}catch(e){}return e}async function g(e){let t=m();try{let r=(0,n.ref)(t,e);return await (0,n.getDownloadURL)(r)}catch(t){try{let t=String("cvchk-1a7e0.firebasestorage.app"),r="1"===String("0")?"http://127.0.0.1:"+(i.env.FIREBASE_EMULATORS_STORAGE_PORT||9199):"https://firebasestorage.googleapis.com",s=t.endsWith(".appspot.com")||t.endsWith(".firebasestorage.app")?t:"".concat(t),a=encodeURIComponent(e);return"".concat(r,"/v0/b/").concat(s,"/o/").concat(a,"?alt=media")}catch(e){throw t}}}async function h(){try{var e,t;let r=d(),s=r.currentUser;if(null==s?void 0:s.uid)return s.uid;if(await new Promise(e=>(0,a.Aj)(r,e)),null===(e=r.currentUser)||void 0===e?void 0:e.uid)return r.currentUser.uid;if(await (0,a.XB)(r),await new Promise(e=>(0,a.Aj)(r,e)),!(null===(t=r.currentUser)||void 0===t?void 0:t.uid))throw Error("Unable to establish user session");return r.currentUser.uid}catch(s){let e=String((null==s?void 0:s.code)||"").toLowerCase(),t=String((null==s?void 0:s.message)||"").toLowerCase();"localhost"===window.location.hostname||window.location.hostname;let r="1"===(i.env.NEXT_PUBLIC_FORCE_DEV_UID||"");if(t.includes("invalid-api-key")||e.includes("admin-restricted-operation")||e.includes("operation-not-allowed")||e.includes("network-request-failed")||e.includes("config")||r)try{let e="dev:uid",t=window.localStorage.getItem(e);return t||(t="dev-".concat(Math.random().toString(36).slice(2)),window.localStorage.setItem(e,t)),t}catch(e){return"dev-".concat(Date.now())}throw s}}}},function(e){e.O(0,[358,139,2,648,971,117,744],function(){return e(e.s=6074)}),_N_E=e.O()}]);