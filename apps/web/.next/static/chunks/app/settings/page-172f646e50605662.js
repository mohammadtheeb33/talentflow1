(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[938],{6707:function(e,t,r){Promise.resolve().then(r.bind(r,4402))},4402:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return d}});var a=r(7437),n=r(2265),s=r(9376),i=r(5978),o=r(6410);let l=[{id:"new",label:"New",color:"bg-blue-100 text-blue-800"},{id:"screening",label:"Screening",color:"bg-yellow-100 text-yellow-800"},{id:"interview",label:"Interview",color:"bg-purple-100 text-purple-800"},{id:"offer",label:"Offer",color:"bg-orange-100 text-orange-800"},{id:"hired",label:"Hired",color:"bg-green-100 text-green-800"},{id:"rejected",label:"Rejected",color:"bg-red-100 text-red-800"}];function c(){let[e,t]=(0,n.useState)([]),[r,s]=(0,n.useState)(!1),[c,d]=(0,n.useState)(!1),[u,m]=(0,n.useState)(null),[g,x]=(0,n.useState)(null),[h,p]=(0,n.useState)("");(0,n.useEffect)(()=>{let e=!0;return(async()=>{try{var r;s(!0);let e=(0,o.kL)(),a=null===(r=e.currentUser)||void 0===r?void 0:r.uid;if(!a)try{a=await (0,o.m6)()}catch(e){}if(!a){m("Unauthorized");return}let n=(0,o.X9)(),c=(0,i.doc)(n,"settings","pipeline_".concat(a)),d=await (0,i.getDoc)(c);d.exists()&&d.data().stages?t(d.data().stages):t(l)}catch(e){m(e.message)}finally{e&&s(!1)}})(),()=>{e=!1}},[]);let f=async()=>{try{var t;d(!0),m(null),x(null);let r=(0,o.kL)(),a=null===(t=r.currentUser)||void 0===t?void 0:t.uid;if(!a)throw Error("Unauthorized");let n=(0,o.X9)();await (0,i.setDoc)((0,i.doc)(n,"settings","pipeline_".concat(a)),{stages:e,uid:a,updatedAt:(0,i.serverTimestamp)()}),x("Pipeline settings saved successfully!"),setTimeout(()=>x(null),3e3)}catch(e){m(e.message||"Failed to save settings")}finally{d(!1)}},b=()=>{h.trim()&&(t([...e,{id:h.toLowerCase().replace(/[^a-z0-9]/g,"_"),label:h,color:"bg-gray-100 text-gray-800"}]),p(""))},v=r=>{let a=[...e];a.splice(r,1),t(a)},y=(r,a)=>{if(r+a<0||r+a>=e.length)return;let n=[...e],s=n[r];n[r]=n[r+a],n[r+a]=s,t(n)};return r?(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"Loading settings..."}):(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)("div",{className:"rounded-xl border border-gray-200 bg-white p-6 shadow-sm",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Pipeline Stages"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Customize the stages of your recruitment pipeline."}),u&&(0,a.jsx)("div",{className:"mt-4 rounded-md bg-red-50 p-3 text-sm text-red-700",children:u}),g&&(0,a.jsx)("div",{className:"mt-4 rounded-md bg-green-50 p-3 text-sm text-green-700",children:g}),(0,a.jsx)("div",{className:"mt-6 space-y-3",children:e.map((r,n)=>(0,a.jsxs)("div",{className:"flex items-center gap-3 rounded-lg border border-gray-100 bg-gray-50 p-3",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)("button",{onClick:()=>y(n,-1),disabled:0===n,className:"text-gray-400 hover:text-gray-600 disabled:opacity-30",children:(0,a.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})})}),(0,a.jsx)("button",{onClick:()=>y(n,1),disabled:n===e.length-1,className:"text-gray-400 hover:text-gray-600 disabled:opacity-30",children:(0,a.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)("input",{value:r.label,onChange:r=>{let a=[...e];a[n].label=r.target.value,t(a)},className:"w-full rounded border-gray-300 bg-white px-3 py-1.5 text-sm shadow-sm focus:border-indigo-500 focus:ring-indigo-500"})}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"rounded-full px-2 py-1 text-xs font-medium ".concat(r.color),children:"Preview"}),(0,a.jsx)("button",{onClick:()=>v(n),className:"ml-2 text-gray-400 hover:text-red-600",title:"Remove stage",children:(0,a.jsx)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},"".concat(r.id,"-").concat(n)))}),(0,a.jsxs)("div",{className:"mt-4 flex gap-2",children:[(0,a.jsx)("input",{value:h,onChange:e=>p(e.target.value),placeholder:"New Stage Name (e.g. Technical Interview)",className:"flex-1 rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",onKeyDown:e=>"Enter"===e.key&&b()}),(0,a.jsx)("button",{onClick:b,disabled:!h.trim(),className:"rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 disabled:opacity-50",children:"Add Stage"})]}),(0,a.jsx)("div",{className:"mt-8 flex justify-end border-t border-gray-100 pt-5",children:(0,a.jsx)("button",{onClick:f,disabled:c,className:"rounded-md bg-indigo-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:opacity-70",children:c?"Saving...":"Save Changes"})})]})})}function d(){let e=(0,s.useSearchParams)().get("tab")||"general",[t,r]=(0,n.useState)("pipeline"===e?"pipeline":"general");return(0,a.jsxs)("main",{className:"mx-auto max-w-5xl px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Settings"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Manage your recruitment process and account preferences."})]}),(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row lg:gap-8",children:[(0,a.jsx)("nav",{className:"mb-8 w-full flex-shrink-0 lg:mb-0 lg:w-64",children:(0,a.jsxs)("div",{className:"flex space-x-2 overflow-x-auto lg:flex-col lg:space-x-0 lg:space-y-1",children:[(0,a.jsx)("button",{onClick:()=>r("general"),className:"whitespace-nowrap rounded-md px-3 py-2 text-left text-sm font-medium transition-colors ".concat("general"===t?"bg-indigo-50 text-indigo-700":"text-gray-900 hover:bg-gray-50 hover:text-gray-900"),children:"General"}),(0,a.jsx)("button",{onClick:()=>r("pipeline"),className:"whitespace-nowrap rounded-md px-3 py-2 text-left text-sm font-medium transition-colors ".concat("pipeline"===t?"bg-indigo-50 text-indigo-700":"text-gray-900 hover:bg-gray-50 hover:text-gray-900"),children:"Pipeline"}),(0,a.jsx)("button",{onClick:()=>r("team"),className:"whitespace-nowrap rounded-md px-3 py-2 text-left text-sm font-medium transition-colors ".concat("team"===t?"bg-indigo-50 text-indigo-700":"text-gray-900 hover:bg-gray-50 hover:text-gray-900"),children:"Team Members"})]})}),(0,a.jsxs)("div",{className:"flex-1",children:["pipeline"===t&&(0,a.jsx)(c,{}),"general"===t&&(0,a.jsxs)("div",{className:"rounded-xl border border-gray-200 bg-white p-6 shadow-sm",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"General Settings"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Account details and preferences."}),(0,a.jsx)("div",{className:"mt-6 border-t border-gray-100 pt-6",children:(0,a.jsx)("p",{className:"text-sm text-gray-500 italic",children:"General settings are coming soon."})})]}),"team"===t&&(0,a.jsxs)("div",{className:"rounded-xl border border-gray-200 bg-white p-6 shadow-sm",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Team Management"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Invite and manage team members."}),(0,a.jsx)("div",{className:"mt-6 border-t border-gray-100 pt-6",children:(0,a.jsx)("p",{className:"text-sm text-gray-500 italic",children:"Team management is coming soon."})})]})]})]})]})}},9376:function(e,t,r){"use strict";var a=r(5475);r.o(a,"useParams")&&r.d(t,{useParams:function(){return a.useParams}}),r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})},6410:function(e,t,r){"use strict";r.d(t,{X9:function(){return u},bH:function(){return m},kL:function(){return d},m6:function(){return x},mi:function(){return g}});var a=r(738),n=r(3301),s=r(5978),i=r(62),o=r(257);let l={apiKey:"AIzaSyATtmjTHjfMEesV1HQU_x1M3W_g_IWYC-g",authDomain:"cvchk-1a7e0.firebaseapp.com",projectId:"cvchk-1a7e0",storageBucket:"cvchk-1a7e0.firebasestorage.app",messagingSenderId:"318794750",appId:"1:318794750:web:ead1f9207f928eb2696eaf",measurementId:"G-VEX3P44B83"},c=null;function d(){return c||(c=(0,a.getApps)().length?(0,a.getApps)()[0]:(0,a.initializeApp)(l)),(0,n.v0)(c)}function u(){c||(c=(0,a.getApps)().length?(0,a.getApps)()[0]:(0,a.initializeApp)(l));let e=(0,s.getFirestore)(c);try{let t="localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname,r="1"===String("0"),a=Number(o.env.FIREBASE_EMULATORS_FIRESTORE_PORT||0)||8090;t&&r&&(0,s.connectFirestoreEmulator)(e,"127.0.0.1",a)}catch(e){}return e}function m(){c||(c=(0,a.getApps)().length?(0,a.getApps)()[0]:(0,a.initializeApp)(l));let e=(0,i.getStorage)(c);try{let t="localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname,r="1"===String("0"),a=Number(o.env.FIREBASE_EMULATORS_STORAGE_PORT||0)||9199;t&&r&&(0,i.connectStorageEmulator)(e,"127.0.0.1",a)}catch(e){}return e}async function g(e){let t=m();try{let r=(0,i.ref)(t,e);return await (0,i.getDownloadURL)(r)}catch(t){try{let t=String("cvchk-1a7e0.firebasestorage.app"),r="1"===String("0")?"http://127.0.0.1:"+(o.env.FIREBASE_EMULATORS_STORAGE_PORT||9199):"https://firebasestorage.googleapis.com",a=t.endsWith(".appspot.com")||t.endsWith(".firebasestorage.app")?t:"".concat(t),n=encodeURIComponent(e);return"".concat(r,"/v0/b/").concat(a,"/o/").concat(n,"?alt=media")}catch(e){throw t}}}async function x(){try{var e,t;let r=d(),a=r.currentUser;if(null==a?void 0:a.uid)return a.uid;if(await new Promise(e=>(0,n.Aj)(r,e)),null===(e=r.currentUser)||void 0===e?void 0:e.uid)return r.currentUser.uid;if(await (0,n.XB)(r),await new Promise(e=>(0,n.Aj)(r,e)),!(null===(t=r.currentUser)||void 0===t?void 0:t.uid))throw Error("Unable to establish user session");return r.currentUser.uid}catch(a){let e=String((null==a?void 0:a.code)||"").toLowerCase(),t=String((null==a?void 0:a.message)||"").toLowerCase();"localhost"===window.location.hostname||window.location.hostname;let r="1"===(o.env.NEXT_PUBLIC_FORCE_DEV_UID||"");if(t.includes("invalid-api-key")||e.includes("admin-restricted-operation")||e.includes("operation-not-allowed")||e.includes("network-request-failed")||e.includes("config")||r)try{let e="dev:uid",t=window.localStorage.getItem(e);return t||(t="dev-".concat(Math.random().toString(36).slice(2)),window.localStorage.setItem(e,t)),t}catch(e){return"dev-".concat(Date.now())}throw a}}}},function(e){e.O(0,[358,139,2,971,117,744],function(){return e(e.s=6707)}),_N_E=e.O()}]);